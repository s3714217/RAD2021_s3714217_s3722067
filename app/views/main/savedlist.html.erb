<h1>Product Details</h1>

  <%     
  itemsNo = 0
  itemsList = nil
  if(is_logged_in())        
    @user = User.find_by id: session[:current_user_id]
    itemsNo = @user.items.size
    itemsList = @user.items
  else
    if(cookies[:vistorsavedlist])
      itemsNo = cookies[:vistorsavedlist].split(",").size
      itemsList = Array.new(itemsNo)
      cookies[:vistorsavedlist].split(",").each_with_index do |itemId,index|
        itemsList[index] = Item.find_by id: itemId
      end
    end
  end
  %>
  
 <% if itemsNo > 0 %>
 <h1>Number of Items:   <%= itemsNo %> </h1>
 <tbody>
   
  <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" data-interval="false" style="margin-left:50px;margin-right:50px;">
    <div class="carousel-inner">
    <% itemsList.each_with_index do |item, index| %>
        <% if index == 0 %> <div class="carousel-item active"> 
        <% else %> <div class="carousel-item"> 
        <% end %>
        
        <div class=button-container>
          <%= form_with url: to_productdetails_path() do |form| %>
          <%= form.hidden_field :itemId, value: item.id %>
          <%= image_submit_tag(item.asseturl, width: 300, height: 400, display: "block") %>
          <% end %>
          <div class='saved'> SAVED </div>
          <%= form_with url: removed_saved_path() do |form| %>
            <%= form.hidden_field :itemId, value: item.id %>
            <%= form.submit '&#9829'.html_safe, method: :post, :class => "button-favourite" %>
          <% end %> 
        </div>
        
        <h3><%= item.name %></h3>
        <h3>Price:</h3><td><%= item.price %></td>
        <br>
        
        <%= form_with url: removed_saved_path() do |form| %>
          <%= form.hidden_field :itemId, value: item.id %>
          <%= form.submit 'Remove', method: :post %>
        <% end %> 
      </div>
    <% end %>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev" style="margin-left:-25px;width: 2%;">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next" style="margin-right:-25px;width: 2%;">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
  
  <% else %>  
  <h1>No items saved </h1>
  
  <% end%>  
    
 </tbody>
    